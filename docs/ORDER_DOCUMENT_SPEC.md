# ç™ºæ³¨æ›¸ï¼ˆPDFï¼‰ä»•æ§˜æ›¸

**æ›´æ–°æ—¥:** 2026å¹´2æœˆ24æ—¥

---

## 1. æ¦‚è¦

ç™ºæ³¨æ›¸ã¯ **GOKKOå€¶æ¥½éƒ¨å‡ºæ¼”ç™ºæ³¨æ›¸** ã¨ã—ã¦PDFã§ç”Ÿæˆã•ã‚Œã‚‹ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ¢ãƒ¼ãƒ€ãƒ«ã§å†…å®¹ã‚’ç¢ºèªãƒ»ç·¨é›†å¾Œã€ŒPDFã‚’ä½œæˆã€ã‚’æŠ¼ã™ã¨ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã‚‹ã€‚

**ç”Ÿæˆæ–¹å¼:** HTML â†’ `html2canvas` ã§ã‚­ãƒ£ãƒ—ãƒãƒ£ â†’ `jsPDF` ã§A4 PDFã«å¤‰æ› â†’ `pdf.save()` ã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

---

## 2. ãƒˆãƒªã‚¬ãƒ¼

| ãƒˆãƒªã‚¬ãƒ¼ | å ´æ‰€ |
|---|---|
| æ’®å½±é€£çµ¡ãƒšãƒ¼ã‚¸ã€Œç™ºæ³¨æ›¸é€ä¿¡å¾…ã¡ã€ã‚¿ãƒ– â†’ ğŸ“„ ç™ºæ³¨æ›¸ãƒœã‚¿ãƒ³ | `openOrderDocModal(castingId)` |

---

## 3. ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ«

PDFã‚’ä½œæˆã™ã‚‹å‰ã«ã€ä»¥ä¸‹7é …ç›®ã®å…¥åŠ›ãƒ»ç·¨é›†ãŒå¯èƒ½:

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ | åˆæœŸå€¤ | DOM ID |
|---|---|---|
| æ—¥ä»˜ | ç¾åœ¨ã®æ—¥ä»˜ (`toLocaleDateString()`) | `pdf-date` |
| å®›åï¼ˆã‚­ãƒ£ã‚¹ãƒˆæ§˜ï¼‰ | `castName` | `pdf-castname` |
| æ¡ˆä»¶å | `projectName` | `pdf-project` |
| å½¹å | `roleName` | `pdf-role` |
| æ’®å½±æ—¥ | `shootDate` / `startDate` / `date` | `pdf-shootdate` |
| é‡‘é¡ | `cost`ï¼ˆåŠè§’æ•°å­—å…¥åŠ›ï¼‰ | `pdf-cost` |
| å‚™è€ƒ | `note` | `pdf-note` |

---

## 4. UUIDï¼ˆç™ºæ³¨æ›¸ç•ªå·ï¼‰

- æ—¢å­˜ã® `poUuid` ãŒã‚ã‚Œã°ãã‚Œã‚’å†åˆ©ç”¨ã€ãªã‘ã‚Œã° `crypto.randomUUID()` ã§æ–°è¦ç”Ÿæˆ
- ç”Ÿæˆã—ãŸ UUID ã¯ `/api/shooting_contact/update` ã«ä¿å­˜ â†’ æ’®å½±é€£çµ¡DB ã® Uåˆ—ã«è¨˜éŒ²
- PDFã®å³ä¸Šã« `No. {uuid}` ã¨ã—ã¦è¡¨ç¤º

---

## 5. PDFæœ¬æ–‡ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            GOKKOå€¶æ¥½éƒ¨å‡ºæ¼”ç™ºæ³¨æ›¸            â”‚  â† ã‚¿ã‚¤ãƒˆãƒ«ï¼ˆä¸­å¤®ãƒ»å¤ªå­—ãƒ»20pxï¼‰
â”‚                                         â”‚
â”‚                         2025/02/24      â”‚  â† æ—¥ä»˜ï¼ˆå³å¯„ã›ï¼‰
â”‚                 No. xxxxxxxx-xxxx-xxxx  â”‚  â† ç™ºæ³¨æ›¸ç•ªå·ï¼ˆå³å¯„ã›ãƒ»å°æ–‡å­—ãƒ»ç°è‰²ï¼‰
â”‚                                         â”‚
â”‚ â—‹â—‹â—‹â—‹ æ§˜                                â”‚  â† å®›å
â”‚                                         â”‚
â”‚ ã”å¿«è«¾ã„ãŸã ãã¾ã—ãŸãƒ‰ãƒ©ãƒå‡ºæ¼”ã®ä»¶ã«        â”‚
â”‚ ã¤ãã¾ã—ã¦ã€ä¸‹è¨˜ã®é€šã‚Šç™ºæ³¨ç”³ã—ä¸Šã’ã¾ã™ã€‚    â”‚  â† æŒ¨æ‹¶æ–‡
â”‚ å†…å®¹ã‚’ã”ç¢ºèªã„ãŸã ãã€ã”ä¸æ˜ãªç‚¹ãŒ          â”‚
â”‚ ã”ã–ã„ã¾ã—ãŸã‚‰æ‹…å½“ã¾ã§ã”é€£çµ¡ãã ã•ã„ã€‚      â”‚
â”‚                                         â”‚
â”‚ ã€ç™ºæ³¨å…ƒã€‘                               â”‚
â”‚ ã€’135-0091                              â”‚
â”‚ æ±äº¬éƒ½æ¸¯åŒºå°å ´2-3-1ãƒˆãƒ¬ãƒ¼ãƒ‰ãƒ”ã‚¢ãŠå°å ´12F   â”‚
â”‚ æ ªå¼ä¼šç¤¾GOKKO                            â”‚
â”‚ æ‹…å½“ï¼šGOKKOå€¶æ¥½éƒ¨ã‚­ãƒ£ã‚¹ãƒ†ã‚£ãƒ³ã‚°æ‹…å½“         â”‚
â”‚                                         â”‚
â”‚ ã€ãŠå–å¼•æ¡ä»¶ã€‘                            â”‚
â”‚ æ”¯æ‰•æ¡ä»¶ï¼šæœˆæœ«ç· ã‚ç¿Œæœˆæœ«æ‰•ã„                â”‚
â”‚ æ”¯æ‰•æ–¹æ³•ï¼šã”æŒ‡å®šã®éŠ€è¡Œå£åº§ã¸ãŠæŒ¯è¾¼ã¿        â”‚
â”‚ ç§˜å¯†ä¿æŒï¼šâ€¦SNSå«ã‚€ï¼‰ã‚’ç¦æ­¢               â”‚  â† ç§˜å¯†ä¿æŒæ¡é …
â”‚                                   ä»¥ä¸Š   â”‚
â”‚                                         â”‚
â”‚                 è¨˜                       â”‚  â† ä¸­å¤®æƒãˆ
â”‚                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚ â”‚   é …ç›®   â”‚     å†…å®¹           â”‚        â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”‚
â”‚ â”‚  æ¡ˆä»¶å  â”‚ {æ¡ˆä»¶å}           â”‚        â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”‚
â”‚ â”‚  å½¹å    â”‚ {å½¹å}             â”‚        â”‚  â† æ˜ç´°ãƒ†ãƒ¼ãƒ–ãƒ«
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”‚
â”‚ â”‚  æ’®å½±æ—¥  â”‚ {æ’®å½±æ—¥}           â”‚        â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”‚
â”‚ â”‚å‡ºæ¼”æ–™    â”‚ Â¥XX,XXXï¼ˆç¨åˆ¥ï¼‰    â”‚        â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. æ˜ç´°ãƒ†ãƒ¼ãƒ–ãƒ«ã®é …ç›®

| é …ç›® | å†…å®¹ | å‚™è€ƒ |
|---|---|---|
| æ¡ˆä»¶å | `data.project` | â€” |
| å½¹å | `data.role` | â€” |
| æ’®å½±æ—¥ | `data.shootDate` | â€” |
| å‡ºæ¼”æ–™ï¼ˆé‡‘é¡ï¼‰ | `Â¥{é‡‘é¡}ï¼ˆç¨åˆ¥ï¼‰` | åŠè§’æ•°å­—ã‚’ `toLocaleString()` ã§ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã«å¤‰æ› |

### é‡‘é¡ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãƒ«ãƒ¼ãƒ«

```javascript
// æ•°å­—ã®ã¿æŠ½å‡º â†’ 0ã‚ˆã‚Šå¤§ããã€Â¥ãƒãƒ¼ã‚¯æœªä»˜ãªã‚‰è‡ªå‹•ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
const numCost = Number(data.cost.replace(/[^0-9]/g, ''));
if (numCost > 0 && !data.cost.includes('Â¥')) {
  costStr = `Â¥${numCost.toLocaleString()}`;
}
// ä¾‹: "18000" â†’ "Â¥18,000"
// ä¾‹: "Â¥18,000" â†’ ãã®ã¾ã¾ "Â¥18,000"
```

---

## 7. å›ºå®šãƒ†ã‚­ã‚¹ãƒˆ

### ç™ºæ³¨å…ƒæƒ…å ±

| é …ç›® | å€¤ |
|---|---|
| éƒµä¾¿ç•ªå· | ã€’135-0091 |
| ä½æ‰€ | æ±äº¬éƒ½æ¸¯åŒºå°å ´2-3-1ãƒˆãƒ¬ãƒ¼ãƒ‰ãƒ”ã‚¢ãŠå°å ´12F |
| ä¼šç¤¾å | æ ªå¼ä¼šç¤¾GOKKO |
| æ‹…å½“ | GOKKOå€¶æ¥½éƒ¨ã‚­ãƒ£ã‚¹ãƒ†ã‚£ãƒ³ã‚°æ‹…å½“ |

### ãŠå–å¼•æ¡ä»¶

| é …ç›® | å€¤ |
|---|---|
| æ”¯æ‰•æ¡ä»¶ | æœˆæœ«ç· ã‚ç¿Œæœˆæœ«æ‰•ã„ |
| æ”¯æ‰•æ–¹æ³• | ã”æŒ‡å®šã®éŠ€è¡Œå£åº§ã¸ãŠæŒ¯è¾¼ã¿ |
| ç§˜å¯†ä¿æŒ | æœ¬ä»¶ã«é–¢ã‚ã‚‹è„šæœ¬å†…å®¹ã€æ’®å½±æƒ…å ±ã€å…±æ¼”è€…æƒ…å ±ç­‰ã¯ã€å…¬å¼è§£ç¦ã¾ã§ç¬¬ä¸‰è€…ã¸ã®æ¼æ´©ï¼ˆSNSå«ã‚€ï¼‰ã‚’ç¦æ­¢ |

---

## 8. å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«

| é …ç›® | å€¤ |
|---|---|
| **ãƒ•ã‚¡ã‚¤ãƒ«å** | `{æ’®å½±æ—¥}_{æ¡ˆä»¶å}_{ã‚­ãƒ£ã‚¹ãƒˆå}æ§˜_ç™ºæ³¨æ›¸.pdf` |
| **ã‚µã‚¤ã‚º** | A4ï¼ˆ210mm Ã— 297mmï¼‰ |
| **ãƒ•ã‚©ãƒ³ãƒˆ** | Hiragino Kaku Gothic ProN / Yu Gothic |

### ãƒ•ã‚¡ã‚¤ãƒ«åä¾‹

```
20250315_ã”ã£ã“å€¶æ¥½éƒ¨ãƒ‰ãƒ©ãƒ_å±±ç”°å¤ªéƒæ§˜_ç™ºæ³¨æ›¸.pdf
```

â€»æ’®å½±æ—¥ã® `/` ã‚„ `-` ã¯è‡ªå‹•çš„ã«é™¤å»ã•ã‚Œã‚‹ã€‚

---

## 9. å‡¦ç†ãƒ•ãƒ­ãƒ¼

```mermaid
sequenceDiagram
    participant User as ãƒ¦ãƒ¼ã‚¶ãƒ¼
    participant Modal as ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ«
    participant API as ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
    participant PDF as PDFç”Ÿæˆ

    User->>Modal: ğŸ“„ ç™ºæ³¨æ›¸ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯
    Modal->>Modal: ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ï¼ˆshootingContactData or castingDataï¼‰
    Modal->>User: 7é …ç›®ã®ç·¨é›†ãƒ•ã‚©ãƒ¼ãƒ è¡¨ç¤º
    User->>Modal: å†…å®¹ç¢ºèªãƒ»ç·¨é›† â†’ PDFã‚’ä½œæˆãƒœã‚¿ãƒ³
    Modal->>Modal: UUIDç”Ÿæˆï¼ˆæ—¢å­˜ or æ–°è¦ï¼‰
    Modal->>API: POST /api/shooting_contact/updateï¼ˆUUIDä¿å­˜ï¼‰
    Modal->>PDF: generatePDFFromData(data)
    PDF->>PDF: HTMLè¦ç´ ã‚’ç”»é¢å¤–ã«ç”Ÿæˆ
    PDF->>PDF: html2canvas ã§ã‚­ãƒ£ãƒ—ãƒãƒ£(scale:2)
    PDF->>PDF: jsPDF ã§ A4 PDFä½œæˆ
    PDF->>User: ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰PDFãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
```

---

## é–¢é€£ã‚³ãƒ¼ãƒ‰å‚ç…§

| é–¢æ•°å | ãƒ•ã‚¡ã‚¤ãƒ« | è¡Œç•ªå· | å½¹å‰² |
|---|---|---|---|
| [openOrderDocModal](file:///Users/mk0012/Desktop/casting-management-system-v1/templates/index.html#L4318-L4434) | index.html | L4318-4434 | ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º + UUIDç”Ÿæˆãƒ»ä¿å­˜ |
| [generatePDFFromData](file:///Users/mk0012/Desktop/casting-management-system-v1/templates/index.html#L4449-L4560) | index.html | L4449-4560 | HTMLç”Ÿæˆ â†’ html2canvas â†’ jsPDF â†’ ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ |
| [getSeasonalGreeting](file:///Users/mk0012/Desktop/casting-management-system-v1/templates/index.html#L4439-L4446) | index.html | L4439-4446 | å­£ç¯€ã®æŒ¨æ‹¶å–å¾—ï¼ˆâ€»ç¾åœ¨æœªä½¿ç”¨ï¼‰ |
